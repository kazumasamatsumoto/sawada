<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>本の詳細</title>
    <link rel="stylesheet" href="../assets/styles/main.css" />
  </head>
  <body>
    <div class="container">
      <h1 id="book-title">本のタイトル</h1>
      <p><strong>著者:</strong> <span id="book-author">著者名</span></p>
      <p><strong>出版社:</strong> <span id="book-publisher">出版社名</span></p>
      <p><strong>ジャンル:</strong> <span id="book-genre">ジャンル名</span></p>
      <p><strong>ISBN:</strong> <span id="book-isbn">ISBN番号</span></p>
      <p><strong>読了日:</strong> <span id="book-readDate">読了日</span></p>
      <p><strong>評価:</strong> <span id="book-rating">評価</span></p>
      <p><strong>メモ:</strong> <span id="book-notes">メモ内容</span></p>
      <button id="edit-button">編集</button>
      <button id="delete-button">削除</button>
    </div>
    <script type="module">
      import StorageService from "../js/services/StorageService.js";

      document.addEventListener("DOMContentLoaded", () => {
        const storageService = new StorageService();

        // URLからIDを取得
        const urlParams = new URLSearchParams(window.location.search);
        const bookId = urlParams.get("id");

        if (bookId) {
          // 本のデータを取得
          const books = storageService.loadBooks();
          const book = books.find((b) => b.id === bookId);

          if (book) {
            // 本の情報を表示
            document.getElementById("book-title").textContent = book.title;
            document.getElementById("book-author").textContent = book.author;
            document.getElementById("book-publisher").textContent =
              book.publisher;
            document.getElementById("book-genre").textContent = book.genre;
            document.getElementById("book-isbn").textContent = book.isbn;
            document.getElementById("book-readDate").textContent =
              book.readDate || "未設定";
            document.getElementById("book-rating").textContent =
              "★".repeat(book.rating) + "☆".repeat(5 - book.rating);
            document.getElementById("book-notes").textContent =
              book.notes || "未設定";
          } else {
            alert("指定された本が見つかりませんでした。");
            window.location.href = "home.html";
          }
        } else {
          alert("本のIDが指定されていません。");
          window.location.href = "home.html";
        }
      });
    </script>
  </body>
</html>
